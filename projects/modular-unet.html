<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <script>if(localStorage.getItem('theme')==='light')document.documentElement.setAttribute('data-theme','light');</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModularUNet - Pure Fruit</title>
    <link rel="icon" href="../Icon.png" type="image/png">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 右侧功能按钮组 -->
    <div class="toggle-buttons">
        <a href="../index.html" class="home-toggle" title="返回主页">
            <i class="fas fa-home"></i>
        </a>
        <button class="theme-toggle" onclick="toggleTheme()" title="切换日间/夜间模式">
            <i class="fas fa-moon"></i>
        </button>
        <button class="lang-toggle" onclick="toggleLanguage()" title="切换中英文">
            <span id="langText">EN</span>
        </button>
    </div>

    <div class="article-container">
        <a href="../projects.html" class="back-link"><span id="back-zh">← 返回项目列表</span><span id="back-en" style="display: none;">← Back to Projects</span></a>

        <article>
            <header class="article-header">
                <span class="post-tag tag-cv" data-zh="计算机视觉" data-en="Computer Vision">计算机视觉</span>
                <span class="post-tag tag-dl" data-zh="深度学习" data-en="Deep Learning">深度学习</span>
                <span class="post-tag tag-tool" data-zh="工具" data-en="Tools">工具</span>
                <h1 id="title-zh">ModularUNet — 模块化 U-Net 变体实验平台</h1>
                <h1 id="title-en" style="display: none;">ModularUNet — Modular U-Net Variant Research Platform</h1>
                <div class="post-meta">
                    <i class="fab fa-github"></i>
                    <a href="https://github.com/PeachPure/ModularUNet" target="_blank"><span id="github-zh">查看源码</span><span id="github-en" style="display: none;">View Source</span></a>
                    • PyTorch • PyQt5
                </div>
            </header>

            <div class="article-content" id="content-zh">
                <h2>项目简介</h2>
                <p>ModularUNet 是一个模块化的 U-Net 变体科研实验平台，用于图像分割任务。编码器卷积块、下采样、上采样、跳跃连接、Bottleneck 均实现为可替换模块，支持通过参数或 PyQt5 图形界面自由组合，产生 11+ 种架构变体。同时包含独立的 U-Net++ 实现。</p>
                <p>在 Oxford-IIIT Pet Dataset 上进行宠物二分类分割测试。</p>

                <h2>主要特性</h2>
                <ul>
                    <li>模块化设计：卷积块、采样器、跳跃连接、Bottleneck 自由搭配</li>
                    <li>单一可配置模型产生 11+ 种架构变体</li>
                    <li>U-Net++ 支持可选深度监督</li>
                    <li>PyQt5 图形界面：配置、训练、预测、对比实验一站式完成</li>
                    <li>训练过程实时绘制 Loss / mIoU 曲线</li>
                    <li>多变体对比实验，曲线并排展示</li>
                    <li>编码器深度可调（3 / 4 / 5 层）</li>
                    <li>中英文界面切换</li>
                </ul>

                <h2>界面截图</h2>
                <p><strong>模型配置</strong> — 选择并测试变体组合</p>
                <img src="../Fig/1.png" alt="模型配置" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">
                <p><strong>训练</strong> — 实时 Loss 和 mIoU 曲线</p>
                <img src="../Fig/2.png" alt="训练" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">
                <p><strong>预测可视化</strong> — 分割结果可视化</p>
                <img src="../Fig/3.png" alt="预测可视化" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">
                <p><strong>对比实验</strong> — 多变体横向对比</p>
                <img src="../Fig/4.png" alt="对比实验" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">

                <h2>可用模块</h2>
                <h3>卷积块 (block_type)</h3>
                <ul>
                    <li><code>double_conv</code> — 标准双卷积（Conv-BN-ReLU x2）</li>
                    <li><code>res_block</code> — 残差块，带 shortcut 连接，缓解梯度消失</li>
                </ul>
                <h3>下采样 (down_type)</h3>
                <ul>
                    <li><code>maxpool</code> — 2x2 最大池化，无参数</li>
                    <li><code>strided_conv</code> — 可学习的 stride=2 卷积</li>
                </ul>
                <h3>上采样 (up_type)</h3>
                <ul>
                    <li><code>conv_transpose</code> — 转置卷积（可学习上采样）</li>
                    <li><code>bilinear</code> — 双线性插值 + 1x1 卷积（无棋盘格伪影）</li>
                </ul>
                <h3>跳跃连接 (skip_type)</h3>
                <ul>
                    <li><code>cat</code> — 通道拼接（原版 U-Net）</li>
                    <li><code>add</code> — 逐元素相加，参数更少</li>
                    <li><code>attention</code> — 注意力门控（Oktay et al., 2018），抑制无关区域</li>
                    <li><code>se</code> — Squeeze-and-Excitation 通道注意力</li>
                </ul>
                <h3>Bottleneck (bottleneck_type)</h3>
                <ul>
                    <li><code>double_conv</code> / <code>res_block</code> — 同卷积块</li>
                    <li><code>atrous</code> — 多尺度空洞卷积（dilation 1,2,4,8），扩大感受野</li>
                </ul>

                <h2>模型架构</h2>
                <pre><code>输入 → [编码器 x depth] → Bottleneck → [解码器 x depth] → 1x1 Conv → 输出
           ↓                                  ↑
         下采样                              上采样
           └──────── 跳跃连接 ────────────────┘</code></pre>
                <p>每个组件（编码器块、下采样、上采样、跳跃连接、Bottleneck）均可独立配置。</p>

                <h2>项目结构</h2>
                <pre><code>ModularUNet/
├── gui_app.py                 # PyQt5 图形界面入口
├── main_variants.py           # 命令行：测试所有变体组合
├── unet_flexible.py           # FlexibleUNet 可配置模型
├── unet_pp.py                 # U-Net++（嵌套 U-Net）
├── dataset.py                 # Oxford-IIIT Pet 数据集加载器
├── modules/
│   ├── __init__.py
│   ├── blocks.py              # DoubleConv / ResBlock / AtrousBottleneck
│   ├── samplers.py            # MaxPool / StridedConv / ConvTranspose / Bilinear
│   └── skip_connections.py    # Cat / Add / AttentionGate / SE
├── test_100/                  # 示例数据
├── requirements.txt
└── README.md</code></pre>

                <h2>快速开始</h2>
                <p>安装依赖：</p>
                <pre><code>pip install -r requirements.txt</code></pre>
                <p>启动图形界面：</p>
                <pre><code>python gui_app.py</code></pre>
                <p>代码调用：</p>
                <pre><code>from unet_flexible import FlexibleUNet

# ResUNet + 注意力门 + 空洞 Bottleneck
model = FlexibleUNet(
    block_type='res_block',
    down_type='strided_conv',
    up_type='bilinear',
    skip_type='attention',
    bottleneck_type='atrous',
    depth=4,
)</code></pre>

                <h2>参考</h2>
                <ul>
                    <li><a href="https://arxiv.org/abs/1505.04597" target="_blank" style="color: var(--accent);">U-Net: Convolutional Networks for Biomedical Image Segmentation (Ronneberger et al., 2015)</a></li>
                    <li><a href="https://arxiv.org/abs/1807.10165" target="_blank" style="color: var(--accent);">U-Net++: A Nested U-Net Architecture (Zhou et al., 2018)</a></li>
                    <li><a href="https://arxiv.org/abs/1804.03999" target="_blank" style="color: var(--accent);">Attention U-Net (Oktay et al., 2018)</a></li>
                    <li><a href="https://arxiv.org/abs/1709.01507" target="_blank" style="color: var(--accent);">Squeeze-and-Excitation Networks (Hu et al., 2018)</a></li>
                </ul>
            </div>

            <div class="article-content" id="content-en" style="display: none;">
                <h2>Project Overview</h2>
                <p>ModularUNet is a modular U-Net variant research platform for image segmentation. Encoder conv blocks, downsampling, upsampling, skip connections, and bottleneck are all implemented as interchangeable modules, supporting free combination via parameters or a PyQt5 GUI to produce 11+ architecture variants. Also includes a standalone U-Net++ implementation.</p>
                <p>Tested on the Oxford-IIIT Pet Dataset for binary pet segmentation.</p>

                <h2>Key Features</h2>
                <ul>
                    <li>Modular design: mix and match blocks, samplers, skip connections, bottleneck</li>
                    <li>11+ architecture variants from a single configurable model</li>
                    <li>U-Net++ with optional deep supervision</li>
                    <li>PyQt5 GUI: configure, train, predict, and compare experiments visually</li>
                    <li>Real-time training curves (Loss / mIoU)</li>
                    <li>Multi-variant comparison experiments with side-by-side plots</li>
                    <li>Adjustable encoder depth (3 / 4 / 5 levels)</li>
                    <li>Bilingual UI (Chinese / English)</li>
                </ul>

                <h2>Screenshots</h2>
                <p><strong>Model Config</strong> — Select and test variant combinations</p>
                <img src="../Fig/1.png" alt="Model Config" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">
                <p><strong>Training</strong> — Real-time loss and mIoU curves</p>
                <img src="../Fig/2.png" alt="Training" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">
                <p><strong>Prediction</strong> — Visualize segmentation results</p>
                <img src="../Fig/3.png" alt="Prediction" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">
                <p><strong>Comparison</strong> — Multi-variant side-by-side comparison</p>
                <img src="../Fig/4.png" alt="Comparison" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">

                <h2>Available Modules</h2>
                <h3>Conv Blocks (block_type)</h3>
                <ul>
                    <li><code>double_conv</code> — Standard double convolution (Conv-BN-ReLU x2)</li>
                    <li><code>res_block</code> — Residual block with shortcut connection</li>
                </ul>
                <h3>Downsampling (down_type)</h3>
                <ul>
                    <li><code>maxpool</code> — Max pooling 2x2, no parameters</li>
                    <li><code>strided_conv</code> — Learnable stride-2 convolution</li>
                </ul>
                <h3>Upsampling (up_type)</h3>
                <ul>
                    <li><code>conv_transpose</code> — Transposed convolution (learnable upsampling)</li>
                    <li><code>bilinear</code> — Bilinear interpolation + 1x1 conv (no checkerboard artifacts)</li>
                </ul>
                <h3>Skip Connections (skip_type)</h3>
                <ul>
                    <li><code>cat</code> — Channel concatenation (original U-Net)</li>
                    <li><code>add</code> — Element-wise addition, fewer parameters</li>
                    <li><code>attention</code> — Attention Gate (Oktay et al., 2018), suppresses irrelevant regions</li>
                    <li><code>se</code> — Squeeze-and-Excitation channel attention</li>
                </ul>
                <h3>Bottleneck (bottleneck_type)</h3>
                <ul>
                    <li><code>double_conv</code> / <code>res_block</code> — Same as conv blocks</li>
                    <li><code>atrous</code> — Multi-scale atrous convolution (dilation 1,2,4,8), expands receptive field</li>
                </ul>

                <h2>Model Architecture</h2>
                <pre><code>Input → [Encoder x depth] → Bottleneck → [Decoder x depth] → 1x1 Conv → Output
            ↓                                  ↑
        Downsample                          Upsample
            └──────── Skip Connection ─────────┘</code></pre>
                <p>Each component (Encoder block, Downsample, Upsample, Skip, Bottleneck) is independently configurable.</p>

                <h2>Project Structure</h2>
                <pre><code>ModularUNet/
├── gui_app.py                 # PyQt5 GUI entry point
├── main_variants.py           # CLI: test all variant combinations
├── unet_flexible.py           # FlexibleUNet: configurable model
├── unet_pp.py                 # U-Net++ (Nested U-Net)
├── dataset.py                 # Oxford-IIIT Pet Dataset loader
├── modules/
│   ├── __init__.py
│   ├── blocks.py              # DoubleConv / ResBlock / AtrousBottleneck
│   ├── samplers.py            # MaxPool / StridedConv / ConvTranspose / Bilinear
│   └── skip_connections.py    # Cat / Add / AttentionGate / SE
├── test_100/                  # Sample data
├── requirements.txt
└── README.md</code></pre>

                <h2>Quick Start</h2>
                <p>Install dependencies:</p>
                <pre><code>pip install -r requirements.txt</code></pre>
                <p>Launch GUI:</p>
                <pre><code>python gui_app.py</code></pre>
                <p>Use in code:</p>
                <pre><code>from unet_flexible import FlexibleUNet

# ResUNet + Attention Gate + Atrous Bottleneck
model = FlexibleUNet(
    block_type='res_block',
    down_type='strided_conv',
    up_type='bilinear',
    skip_type='attention',
    bottleneck_type='atrous',
    depth=4,
)</code></pre>

                <h2>References</h2>
                <ul>
                    <li><a href="https://arxiv.org/abs/1505.04597" target="_blank" style="color: var(--accent);">U-Net: Convolutional Networks for Biomedical Image Segmentation (Ronneberger et al., 2015)</a></li>
                    <li><a href="https://arxiv.org/abs/1807.10165" target="_blank" style="color: var(--accent);">U-Net++: A Nested U-Net Architecture (Zhou et al., 2018)</a></li>
                    <li><a href="https://arxiv.org/abs/1804.03999" target="_blank" style="color: var(--accent);">Attention U-Net (Oktay et al., 2018)</a></li>
                    <li><a href="https://arxiv.org/abs/1709.01507" target="_blank" style="color: var(--accent);">Squeeze-and-Excitation Networks (Hu et al., 2018)</a></li>
                </ul>
            </div>
        </article>
    </div>

    <footer>
        <p>
            <span class="text-zh">本文阅读量</span><span class="text-en" style="display: none;">Page Views</span> <span id="busuanzi_value_page_pv"></span> <span class="text-zh">次</span><span class="text-en" style="display: none;">times</span>
        </p>
        <p>&copy; 2026 Pure Fruit Team</p>
    </footer>

    <!-- 不蒜子统计 -->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const btn = document.querySelector('.theme-toggle i');
            if (html.getAttribute('data-theme') === 'light') {
                html.removeAttribute('data-theme');
                btn.className = 'fas fa-moon';
                localStorage.setItem('theme', 'dark');
            } else {
                html.setAttribute('data-theme', 'light');
                btn.className = 'fas fa-sun';
                localStorage.setItem('theme', 'light');
            }
        }
        if (localStorage.getItem('theme') === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
            document.querySelector('.theme-toggle i').className = 'fas fa-sun';
        }

        // 语言切换功能
        let currentLang = 'zh';
        function toggleLanguage() {
            const titleZh = document.getElementById('title-zh');
            const titleEn = document.getElementById('title-en');
            const githubZh = document.getElementById('github-zh');
            const githubEn = document.getElementById('github-en');
            const contentZh = document.getElementById('content-zh');
            const contentEn = document.getElementById('content-en');
            const backZh = document.getElementById('back-zh');
            const backEn = document.getElementById('back-en');
            const langText = document.getElementById('langText');

            if (currentLang === 'zh') {
                document.title = 'ModularUNet - Pure Fruit';
                titleZh.style.display = 'none';
                titleEn.style.display = 'block';
                githubZh.style.display = 'none';
                githubEn.style.display = 'inline';
                contentZh.style.display = 'none';
                contentEn.style.display = 'block';
                backZh.style.display = 'none';
                backEn.style.display = 'inline';
                document.querySelectorAll('.text-zh').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.text-en').forEach(el => el.style.display = 'inline');
                // 切换标签文本
                document.querySelectorAll('.post-tag').forEach(tag => {
                    if (tag.dataset.en) {
                        tag.textContent = tag.dataset.en;
                    }
                });
                langText.textContent = '中';
                currentLang = 'en';
                localStorage.setItem('language', 'en');
            } else {
                document.title = 'ModularUNet - Pure Fruit';
                titleZh.style.display = 'block';
                titleEn.style.display = 'none';
                githubZh.style.display = 'inline';
                githubEn.style.display = 'none';
                contentZh.style.display = 'block';
                contentEn.style.display = 'none';
                backZh.style.display = 'inline';
                backEn.style.display = 'none';
                document.querySelectorAll('.text-zh').forEach(el => el.style.display = 'inline');
                document.querySelectorAll('.text-en').forEach(el => el.style.display = 'none');
                // 切换标签文本
                document.querySelectorAll('.post-tag').forEach(tag => {
                    if (tag.dataset.zh) {
                        tag.textContent = tag.dataset.zh;
                    }
                });
                langText.textContent = 'EN';
                currentLang = 'zh';
                localStorage.setItem('language', 'zh');
            }
        }

        // 读取保存的语言设置
        if (localStorage.getItem('language') === 'en') {
            toggleLanguage();
        }
    </script>
</body>
</html>
